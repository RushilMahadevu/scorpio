(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10204,e=>{"use strict";var t=e.i(18050),r=e.i(932),i=e.i(71645),n=e.i(48425),a=i.forwardRef((e,r)=>(0,t.jsx)(n.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));a.displayName="Label";var s=e.i(75157);function o(e){let i,n,o,l,d=(0,r.c)(8);return d[0]!==e?({className:i,...n}=e,d[0]=e,d[1]=i,d[2]=n):(i=d[1],n=d[2]),d[3]!==i?(o=(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",i),d[3]=i,d[4]=o):o=d[4],d[5]!==n||d[6]!==o?(l=(0,t.jsx)(a,{"data-slot":"label",className:o,...n}),d[5]=n,d[6]=o,d[7]=l):l=d[7],l}e.s(["Label",()=>o],10204)},48425,e=>{"use strict";var t=e.i(71645);e.i(74080);var r=e.i(91918),i=e.i(18050),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,n)=>{let a=(0,r.createSlot)(`Primitive.${n}`),s=t.forwardRef((e,t)=>{let{asChild:r,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(r?a:n,{...s,ref:t})});return s.displayName=`Primitive.${n}`,{...e,[n]:s}},{});e.s(["Primitive",()=>n])},93479,e=>{"use strict";var t=e.i(18050),r=e.i(932),i=e.i(75157);function n(e){let n,a,s,o,l,d=(0,r.c)(10);return d[0]!==e?({className:n,type:s,...a}=e,d[0]=e,d[1]=n,d[2]=a,d[3]=s):(n=d[1],a=d[2],s=d[3]),d[4]!==n?(o=(0,i.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),d[4]=n,d[5]=o):o=d[5],d[6]!==a||d[7]!==o||d[8]!==s?(l=(0,t.jsx)("input",{type:s,"data-slot":"input",className:o,...a}),d[6]=a,d[7]=o,d[8]=s,d[9]=l):l=d[9],l}e.s(["Input",()=>n])},15288,e=>{"use strict";var t=e.i(18050),r=e.i(932),i=e.i(75157);function n(e){let n,a,s,o,l=(0,r.c)(8);return l[0]!==e?({className:n,...a}=e,l[0]=e,l[1]=n,l[2]=a):(n=l[1],a=l[2]),l[3]!==n?(s=(0,i.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",n),l[3]=n,l[4]=s):s=l[4],l[5]!==a||l[6]!==s?(o=(0,t.jsx)("div",{"data-slot":"card",className:s,...a}),l[5]=a,l[6]=s,l[7]=o):o=l[7],o}function a(e){let n,a,s,o,l=(0,r.c)(8);return l[0]!==e?({className:n,...a}=e,l[0]=e,l[1]=n,l[2]=a):(n=l[1],a=l[2]),l[3]!==n?(s=(0,i.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),l[3]=n,l[4]=s):s=l[4],l[5]!==a||l[6]!==s?(o=(0,t.jsx)("div",{"data-slot":"card-header",className:s,...a}),l[5]=a,l[6]=s,l[7]=o):o=l[7],o}function s(e){let n,a,s,o,l=(0,r.c)(8);return l[0]!==e?({className:n,...a}=e,l[0]=e,l[1]=n,l[2]=a):(n=l[1],a=l[2]),l[3]!==n?(s=(0,i.cn)("leading-none font-semibold",n),l[3]=n,l[4]=s):s=l[4],l[5]!==a||l[6]!==s?(o=(0,t.jsx)("div",{"data-slot":"card-title",className:s,...a}),l[5]=a,l[6]=s,l[7]=o):o=l[7],o}function o(e){let n,a,s,o,l=(0,r.c)(8);return l[0]!==e?({className:n,...a}=e,l[0]=e,l[1]=n,l[2]=a):(n=l[1],a=l[2]),l[3]!==n?(s=(0,i.cn)("text-muted-foreground text-sm",n),l[3]=n,l[4]=s):s=l[4],l[5]!==a||l[6]!==s?(o=(0,t.jsx)("div",{"data-slot":"card-description",className:s,...a}),l[5]=a,l[6]=s,l[7]=o):o=l[7],o}function l(e){let n,a,s,o,l=(0,r.c)(8);return l[0]!==e?({className:n,...a}=e,l[0]=e,l[1]=n,l[2]=a):(n=l[1],a=l[2]),l[3]!==n?(s=(0,i.cn)("px-6",n),l[3]=n,l[4]=s):s=l[4],l[5]!==a||l[6]!==s?(o=(0,t.jsx)("div",{"data-slot":"card-content",className:s,...a}),l[5]=a,l[6]=s,l[7]=o):o=l[7],o}e.s(["Card",()=>n,"CardContent",()=>l,"CardDescription",()=>o,"CardHeader",()=>a,"CardTitle",()=>s])},87486,e=>{"use strict";var t=e.i(18050),r=e.i(932),i=e.i(91918),n=e.i(25913),a=e.i(75157);let s=(0,n.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let n,o,l,d,c,u,p=(0,r.c)(12);p[0]!==e?({className:n,variant:d,asChild:l,...o}=e,p[0]=e,p[1]=n,p[2]=o,p[3]=l,p[4]=d):(n=p[1],o=p[2],l=p[3],d=p[4]);let f=void 0!==l&&l?i.Slot:"span";return p[5]!==n||p[6]!==d?(c=(0,a.cn)(s({variant:d}),n),p[5]=n,p[6]=d,p[7]=c):c=p[7],p[8]!==f||p[9]!==o||p[10]!==c?(u=(0,t.jsx)(f,{"data-slot":"badge",className:c,...o}),p[8]=f,p[9]=o,p[10]=c,p[11]=u):u=p[11],u}e.s(["Badge",()=>o])},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},28783,24687,e=>{"use strict";e.i(91812);var t=e.i(78437),r=e.i(59141);let i=(0,t.getGenerativeModel)(r.genAI,{model:"gemini-2.5-flash"});async function n(e){try{let t=`Explain the physics concept: "${e}" in simple terms suitable for a high school student. Keep it concise.`,r=await i.generateContent(t);return(await r.response).text()}catch(e){if(console.error("Error explaining concept:",e),e instanceof Error)return`Error: ${e.message}`;return"Sorry, I couldn't explain that concept right now."}}async function a(e){try{let t=`Help me solve this physics problem step-by-step: "${e}". Do not just give the answer, explain the steps clearly.`,r=await i.generateContent(t);return(await r.response).text()}catch(e){if(console.error("Error solving problem:",e),e instanceof Error)return`Error: ${e.message}`;return"Sorry, I couldn't help solve that problem right now."}}async function s(e,t){try{let r=`Grade the following student answer for the physics question: "${e}".
    Student Answer: "${t}"
    Provide a score out of 10 and brief feedback. Format: "Score: X/10. Feedback: ..."`,n=await i.generateContent(r);return(await n.response).text()}catch(e){return console.error("Error grading response:",e),"Error grading response."}}async function o(e,t,r){try{let n=`Generate ${t} physics questions about "${e}" at a ${r} difficulty level.
    Return ONLY a raw JSON array of objects. Do not include any other text.
    Each object must have:
    - "text": The question text.
    - "type": "multiple-choice"
    - "options": An array of 4 strings.
    - "correctAnswer": The correct answer string (must be one of the options).
    
    Example format:
    [{"text": "Q1", "type": "multiple-choice", "options": ["A", "B", "C", "D"], "correctAnswer": "A"}]`,a=await i.generateContent(n),s=(await a.response).text(),o=s.match(/\[[\s\S]*\]/),l=o?o[0]:s;return JSON.parse(l)}catch(e){return console.error("Error generating questions:",e),[]}}e.s(["explainPhysicsConcept",()=>n,"generateAssignmentQuestions",()=>o,"gradeResponse",()=>s,"helpSolveProblem",()=>a],28783);var l=e.i(18050),d=e.i(932),c=e.i(75157);function u(e){let t,r,i,n,a=(0,d.c)(8);return a[0]!==e?({className:t,...r}=e,a[0]=e,a[1]=t,a[2]=r):(t=a[1],r=a[2]),a[3]!==t?(i=(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),a[3]=t,a[4]=i):i=a[4],a[5]!==r||a[6]!==i?(n=(0,l.jsx)("textarea",{"data-slot":"textarea",className:i,...r}),a[5]=r,a[6]=i,a[7]=n):n=a[7],n}e.s(["Textarea",()=>u],24687)},14764,e=>{"use strict";let t=(0,e.i(75254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},67011,e=>{"use strict";var t=e.i(18050),r=e.i(932),i=e.i(71645),n=e.i(81140),a=e.i(20783);function s(e,r=[]){let n=[],a=()=>{let t=n.map(e=>i.createContext(e));return function(r){let n=r?.[e]||t;return i.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return a.scopeName=e,[function(r,a){let s=i.createContext(a),o=n.length;n=[...n,a];let l=r=>{let{scope:n,children:a,...l}=r,d=n?.[e]?.[o]||s,c=i.useMemo(()=>l,Object.values(l));return(0,t.jsx)(d.Provider,{value:c,children:a})};return l.displayName=r+"Provider",[l,function(t,n){let l=n?.[e]?.[o]||s,d=i.useContext(l);if(d)return d;if(void 0!==a)return a;throw Error(`\`${t}\` must be used within \`${r}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:i})=>{let n=r(e)[`__scope${i}`];return{...t,...n}},{});return i.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(a,...r)]}e.i(74080);var o=Symbol("radix.slottable");function l(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}var d=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{var n,s;let o,d,c,u=(s=n=`Primitive.${r}`,(o=i.forwardRef((e,t)=>{let{children:r,...n}=e;if(i.isValidElement(r)){var s;let e,o,l=(s=r,(o=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(o=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),d=function(e,t){let r={...t};for(let i in t){let n=e[i],a=t[i];/^on[A-Z]/.test(i)?n&&a?r[i]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(r[i]=n):"style"===i?r[i]={...n,...a}:"className"===i&&(r[i]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==i.Fragment&&(d.ref=t?(0,a.composeRefs)(t,l):l),i.cloneElement(r,d)}return i.Children.count(r)>1?i.Children.only(null):null})).displayName=`${s}.SlotClone`,d=o,(c=i.forwardRef((e,r)=>{let{children:n,...a}=e,s=i.Children.toArray(n),o=s.find(l);if(o){let e=o.props.children,n=s.map(t=>t!==o?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,t.jsx)(d,{...a,ref:r,children:i.isValidElement(e)?i.cloneElement(e,void 0,n):null})}return(0,t.jsx)(d,{...a,ref:r,children:n})})).displayName=`${n}.Slot`,c),p=i.forwardRef((e,i)=>{let{asChild:n,...a}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(n?u:r,{...a,ref:i})});return p.displayName=`Primitive.${r}`,{...e,[r]:p}},{}),c=e.i(42727),u=e.i(69340),p=e.i(86318),f=e.i(35804),m=e.i(96626),h="Radio",[x,v]=s(h),[g,b]=x(h),y=i.forwardRef((e,r)=>{let{__scopeRadio:s,name:o,checked:l=!1,required:c,disabled:u,value:p="on",onCheck:f,form:m,...h}=e,[x,v]=i.useState(null),b=(0,a.useComposedRefs)(r,e=>v(e)),y=i.useRef(!1),w=!x||m||!!x.closest("form");return(0,t.jsxs)(g,{scope:s,checked:l,disabled:u,children:[(0,t.jsx)(d.button,{type:"button",role:"radio","aria-checked":l,"data-state":N(l),"data-disabled":u?"":void 0,disabled:u,value:p,...h,ref:b,onClick:(0,n.composeEventHandlers)(e.onClick,e=>{l||f?.(),w&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),w&&(0,t.jsx)(C,{control:x,bubbles:!y.current,name:o,value:p,checked:l,required:c,disabled:u,form:m,style:{transform:"translateX(-100%)"}})]})});y.displayName=h;var w="RadioIndicator",j=i.forwardRef((e,r)=>{let{__scopeRadio:i,forceMount:n,...a}=e,s=b(w,i);return(0,t.jsx)(m.Presence,{present:n||s.checked,children:(0,t.jsx)(d.span,{"data-state":N(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:r})})});j.displayName=w;var C=i.forwardRef(({__scopeRadio:e,control:r,checked:n,bubbles:s=!0,...o},l)=>{let c,u=i.useRef(null),p=(0,a.useComposedRefs)(u,l),m=(c=i.useRef({value:n,previous:n}),i.useMemo(()=>(c.current.value!==n&&(c.current.previous=c.current.value,c.current.value=n),c.current.previous),[n])),h=(0,f.useSize)(r);return i.useEffect(()=>{let e=u.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(m!==n&&t){let r=new Event("click",{bubbles:s});t.call(e,n),e.dispatchEvent(r)}},[m,n,s]),(0,t.jsx)(d.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:p,style:{...o.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function N(e){return e?"checked":"unchecked"}C.displayName="RadioBubbleInput";var R=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],k="RadioGroup",[S,E]=s(k,[c.createRovingFocusGroupScope,v]),D=(0,c.createRovingFocusGroupScope)(),$=v(),[I,A]=S(k),P=i.forwardRef((e,r)=>{let{__scopeRadioGroup:i,name:n,defaultValue:a,value:s,required:o=!1,disabled:l=!1,orientation:f,dir:m,loop:h=!0,onValueChange:x,...v}=e,g=D(i),b=(0,p.useDirection)(m),[y,w]=(0,u.useControllableState)({prop:s,defaultProp:a??null,onChange:x,caller:k});return(0,t.jsx)(I,{scope:i,name:n,required:o,disabled:l,value:y,onValueChange:w,children:(0,t.jsx)(c.Root,{asChild:!0,...g,orientation:f,dir:b,loop:h,children:(0,t.jsx)(d.div,{role:"radiogroup","aria-required":o,"aria-orientation":f,"data-disabled":l?"":void 0,dir:b,...v,ref:r})})})});P.displayName=k;var q="RadioGroupItem",L=i.forwardRef((e,r)=>{let{__scopeRadioGroup:s,disabled:o,...l}=e,d=A(q,s),u=d.disabled||o,p=D(s),f=$(s),m=i.useRef(null),h=(0,a.useComposedRefs)(r,m),x=d.value===l.value,v=i.useRef(!1);return i.useEffect(()=>{let e=e=>{R.includes(e.key)&&(v.current=!0)},t=()=>v.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,t.jsx)(c.Item,{asChild:!0,...p,focusable:!u,active:x,children:(0,t.jsx)(y,{disabled:u,required:d.required,checked:x,...f,...l,name:d.name,ref:h,onCheck:()=>d.onValueChange(l.value),onKeyDown:(0,n.composeEventHandlers)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,n.composeEventHandlers)(l.onFocus,()=>{v.current&&m.current?.click()})})})});L.displayName=q;var T=i.forwardRef((e,r)=>{let{__scopeRadioGroup:i,...n}=e,a=$(i);return(0,t.jsx)(j,{...a,...n,ref:r})});T.displayName="RadioGroupIndicator";var _=e.i(33498),G=e.i(75157);function F(e){let i,n,a,s,o=(0,r.c)(8);return o[0]!==e?({className:i,...n}=e,o[0]=e,o[1]=i,o[2]=n):(i=o[1],n=o[2]),o[3]!==i?(a=(0,G.cn)("grid gap-3",i),o[3]=i,o[4]=a):a=o[4],o[5]!==n||o[6]!==a?(s=(0,t.jsx)(P,{"data-slot":"radio-group",className:a,...n}),o[5]=n,o[6]=a,o[7]=s):s=o[7],s}function M(e){let i,n,a,s,o,l=(0,r.c)(9);return l[0]!==e?({className:i,...n}=e,l[0]=e,l[1]=i,l[2]=n):(i=l[1],n=l[2]),l[3]!==i?(a=(0,G.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",i),l[3]=i,l[4]=a):a=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)(T,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,t.jsx)(_.CircleIcon,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})}),l[5]=s):s=l[5],l[6]!==n||l[7]!==a?(o=(0,t.jsx)(L,{"data-slot":"radio-group-item",className:a,...n,children:s}),l[6]=n,l[7]=a,l[8]=o):o=l[8],o}e.s(["RadioGroup",()=>F,"RadioGroupItem",()=>M],67011)},90179,e=>{"use strict";var t=e.i(18050),r=e.i(932),i=e.i(71645),n=e.i(18566);e.i(36180);var a=e.i(98925),s=e.i(59141),o=e.i(4071),l=e.i(28783),d=e.i(15288),c=e.i(19455),u=e.i(24687),p=e.i(93479),f=e.i(10204),m=e.i(87486),h=e.i(67011),x=e.i(71689),v=e.i(14764),g=e.i(69638),b=e.i(22016);function y(){let e=(0,n.useSearchParams)().get("id"),r=(0,n.useRouter)(),{user:y}=(0,o.useAuth)(),[w,j]=(0,i.useState)(null),[C,N]=(0,i.useState)({}),[R,k]=(0,i.useState)(!0),[S,E]=(0,i.useState)(!1),[D,$]=(0,i.useState)(!1),[I,A]=(0,i.useState)(null);(0,i.useEffect)(()=>{!async function(){if(e&&y)try{let t=await (0,a.getDoc)((0,a.doc)(s.db,"assignments",e));if(t.exists()){let e=t.data();j({id:t.id,title:e.title,description:e.description,dueDate:e.dueDate?.toDate?.()||new Date(e.dueDate),questions:e.questions||[]})}let r=(0,a.query)((0,a.collection)(s.db,"submissions"),(0,a.where)("assignmentId","==",e),(0,a.where)("studentId","==",y.uid)),i=await (0,a.getDocs)(r);if(!i.empty){let e=i.docs[0].data();A(e),$(!0);let t={};e.answers?.forEach(e=>{t[e.questionId]=e.answer}),N(t)}}catch(e){console.error("Error fetching assignment:",e)}finally{k(!1)}}()},[e,y]);let P=async()=>{if(w&&y){E(!0);try{let e=w.questions.map(e=>({questionId:e.id,questionText:e.text,answer:C[e.id]||""})),t=0,i=await Promise.all(e.map(async e=>{let r=w.questions.find(t=>t.id===e.questionId);if(r?.type==="text"&&e.answer){let r=await (0,l.gradeResponse)(e.questionText,e.answer),i=r.match(/(\d+)\/10|\b(\d+)%/),n=i?parseInt(i[1]||i[2]):70;return t+=n,{...e,feedback:r,score:n}}return e})),n=w.questions.length>0?Math.round(t/w.questions.filter(e=>"text"===e.type).length):0;await (0,a.addDoc)((0,a.collection)(s.db,"submissions"),{assignmentId:w.id,studentId:y.uid,studentEmail:y.email,answers:i,submittedAt:new Date,graded:!0,score:n}),$(!0),r.push("/student/submissions")}catch(e){console.error("Error submitting:",e)}finally{E(!1)}}};return R?(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading..."}):w?(0,t.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,t.jsxs)(b.default,{href:"/student/assignments",className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground",children:[(0,t.jsx)(x.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Assignments"]}),(0,t.jsx)(d.Card,{children:(0,t.jsxs)(d.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d.CardTitle,{children:w.title}),(0,t.jsx)(d.CardDescription,{children:w.description})]}),D&&(0,t.jsxs)(m.Badge,{className:"bg-green-500",children:[(0,t.jsx)(g.CheckCircle,{className:"h-3 w-3 mr-1"}),"Submitted"]})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Due: ",new Date(w.dueDate).toLocaleDateString()]})]})}),(0,t.jsx)("div",{className:"space-y-4",children:w.questions.map((e,r)=>(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{children:[(0,t.jsxs)(f.Label,{className:"text-base",children:["Question ",r+1]}),(0,t.jsx)("p",{className:"text-sm",children:e.text})]}),(0,t.jsx)(d.CardContent,{children:"multiple-choice"===e.type&&e.options?(0,t.jsx)(h.RadioGroup,{value:C[e.id]||"",onValueChange:t=>N({...C,[e.id]:t}),disabled:D,children:e.options.map((r,i)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.RadioGroupItem,{value:r,id:`${e.id}-${i}`}),(0,t.jsx)(f.Label,{htmlFor:`${e.id}-${i}`,children:r})]},i))}):"true-false"===e.type?(0,t.jsxs)(h.RadioGroup,{value:C[e.id]||"",onValueChange:t=>N({...C,[e.id]:t}),disabled:D,children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.RadioGroupItem,{value:"True",id:`${e.id}-true`}),(0,t.jsx)(f.Label,{htmlFor:`${e.id}-true`,children:"True"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.RadioGroupItem,{value:"False",id:`${e.id}-false`}),(0,t.jsx)(f.Label,{htmlFor:`${e.id}-false`,children:"False"})]})]}):"short-answer"===e.type?(0,t.jsx)(p.Input,{value:C[e.id]||"",onChange:t=>N({...C,[e.id]:t.target.value}),placeholder:"Type your answer here...",disabled:D}):(0,t.jsx)(u.Textarea,{value:C[e.id]||"",onChange:t=>N({...C,[e.id]:t.target.value}),placeholder:"Type your answer here...",rows:4,disabled:D})})]},e.id))}),!D&&(0,t.jsx)(c.Button,{onClick:P,disabled:S,className:"w-full",children:S?"Submitting...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Send,{className:"h-4 w-4 mr-2"}),"Submit Assignment"]})})]}):(0,t.jsx)("p",{className:"text-destructive",children:"Assignment not found"})}function w(){let e,n=(0,r.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading..."}),children:(0,t.jsx)(y,{})}),n[0]=e):e=n[0],e}e.s(["default",()=>w])}]);