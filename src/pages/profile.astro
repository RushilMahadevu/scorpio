---
import StudentLayout from "../layouts/StudentLayout.astro";

const title = "Profile";

// Sample student profile data
const student = {
  id: 'STU001',
  firstName: 'Alex',
  lastName: 'Johnson',
  email: 'alex.johnson@student.edu',
  studentId: '20240156',
  major: 'Physics',
  year: 'Junior',
  gpa: 3.67,
  credits: 96,
  enrollmentDate: 'Fall 2022',
  status: 'Active',
  phone: '(555) 123-4567',
  address: {
    street: '123 University Ave',
    city: 'College Town',
    state: 'CA',
    zip: '90210'
  },
  emergencyContact: {
    name: 'Sarah Johnson',
    relationship: 'Mother',
    phone: '(555) 987-6543'
  },
  avatar: '/assets/default-avatar.png'
};

// Sample enrolled courses
const enrolledCourses = [
  {
    id: 'PHYS301',
    name: 'Classical Mechanics',
    instructor: 'Dr. Smith',
    credits: 4,
    schedule: 'MWF 10:00-11:00 AM',
    location: 'Physics Building 201',
    grade: 'A-'
  },
  {
    id: 'PHYS302',
    name: 'Electromagnetism',
    instructor: 'Dr. Brown',
    credits: 4,
    schedule: 'TTh 2:00-3:30 PM',
    location: 'Physics Building 105',
    grade: 'B+'
  },
  {
    id: 'MATH401',
    name: 'Advanced Calculus',
    instructor: 'Dr. Davis',
    credits: 3,
    schedule: 'MWF 1:00-2:00 PM',
    location: 'Math Building 301',
    grade: 'A'
  },
  {
    id: 'PHYS399',
    name: 'Research Methods',
    instructor: 'Dr. Wilson',
    credits: 2,
    schedule: 'F 3:00-5:00 PM',
    location: 'Physics Lab 102',
    grade: 'A'
  }
];

// Academic history
const academicHistory = [
  { semester: 'Fall 2024', credits: 13, gpa: 3.8, status: 'Current' },
  { semester: 'Spring 2024', credits: 15, gpa: 3.6, status: 'Completed' },
  { semester: 'Fall 2023', credits: 16, gpa: 3.7, status: 'Completed' },
  { semester: 'Spring 2023', credits: 14, gpa: 3.5, status: 'Completed' },
  { semester: 'Fall 2022', credits: 12, gpa: 3.4, status: 'Completed' }
];
---

<StudentLayout title={title} selectedItem="profile">
  <div class="student-profile">
    <div class="profile-header">
      <div class="header-content">
        <h1>My Profile</h1>
        <p class="header-description">Manage your personal information and academic details</p>
      </div>
    </div>

    <div class="profile-content">
      <div class="profile-main">
        <!-- Personal Information Section -->
        <section class="profile-section">
          <div class="section-header">
            <h2>Personal Information</h2>
            <button class="edit-btn" data-section="personal">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
              </svg>
              Edit
            </button>
          </div>

          <div class="profile-card">
            <div class="student-info">
              <div class="avatar-section">
                <div class="avatar">
                  <img src={student.avatar} alt="Student avatar" />
                </div>
                <button class="avatar-upload">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="17,8 12,3 7,8"></polyline>
                    <line x1="12" y1="3" x2="12" y2="15"></line>
                  </svg>
                  Upload Photo
                </button>
              </div>

              <div class="basic-info">
                <div class="info-grid">
                  <div class="info-item">
                    <label>First Name</label>
                    <span>{student.firstName}</span>
                  </div>
                  <div class="info-item">
                    <label>Last Name</label>
                    <span>{student.lastName}</span>
                  </div>
                  <div class="info-item">
                    <label>Email</label>
                    <span>{student.email}</span>
                  </div>
                  <div class="info-item">
                    <label>Phone</label>
                    <span>{student.phone}</span>
                  </div>
                  <div class="info-item">
                    <label>Student ID</label>
                    <span>{student.studentId}</span>
                  </div>
                  <div class="info-item">
                    <label>Status</label>
                    <span class="status active">{student.status}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Academic Information Section -->
        <section class="profile-section">
          <div class="section-header">
            <h2>Academic Information</h2>
          </div>

          <div class="profile-card">
            <div class="academic-stats">
              <div class="stat-item">
                <div class="stat-value">{student.gpa}</div>
                <div class="stat-label">Current GPA</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">{student.credits}</div>
                <div class="stat-label">Credits Earned</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">{student.year}</div>
                <div class="stat-label">Class Standing</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">{student.major}</div>
                <div class="stat-label">Major</div>
              </div>
            </div>

            <div class="academic-details">
              <div class="info-item">
                <label>Enrollment Date</label>
                <span>{student.enrollmentDate}</span>
              </div>
            </div>
          </div>
        </section>

        <!-- Address Information Section -->
        <section class="profile-section">
          <div class="section-header">
            <h2>Address Information</h2>
            <button class="edit-btn" data-section="address">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
              </svg>
              Edit
            </button>
          </div>

          <div class="profile-card">
            <div class="info-grid">
              <div class="info-item">
                <label>Street Address</label>
                <span>{student.address.street}</span>
              </div>
              <div class="info-item">
                <label>City</label>
                <span>{student.address.city}</span>
              </div>
              <div class="info-item">
                <label>State</label>
                <span>{student.address.state}</span>
              </div>
              <div class="info-item">
                <label>ZIP Code</label>
                <span>{student.address.zip}</span>
              </div>
            </div>
          </div>
        </section>

        <!-- Emergency Contact Section -->
        <section class="profile-section">
          <div class="section-header">
            <h2>Emergency Contact</h2>
            <button class="edit-btn" data-section="emergency">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
              </svg>
              Edit
            </button>
          </div>

          <div class="profile-card">
            <div class="info-grid">
              <div class="info-item">
                <label>Contact Name</label>
                <span>{student.emergencyContact.name}</span>
              </div>
              <div class="info-item">
                <label>Relationship</label>
                <span>{student.emergencyContact.relationship}</span>
              </div>
              <div class="info-item">
                <label>Phone Number</label>
                <span>{student.emergencyContact.phone}</span>
              </div>
            </div>
          </div>
        </section>
      </div>

      <div class="profile-sidebar">
        <!-- Current Courses -->
        <section class="sidebar-section">
          <h3>Current Courses</h3>
          <div class="courses-list">
            {enrolledCourses.map(course => (
              <div class="course-item">
                <div class="course-header">
                  <span class="course-code">{course.id}</span>
                  <span class={`course-grade grade-${course.grade.replace(/[+-]/, '').toLowerCase()}`}>
                    {course.grade}
                  </span>
                </div>
                <h4 class="course-name">{course.name}</h4>
                <div class="course-details">
                  <div class="detail-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                      <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span>{course.instructor}</span>
                  </div>
                  <div class="detail-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="12" cy="12" r="10"></circle>
                      <polyline points="12,6 12,12 16,14"></polyline>
                    </svg>
                    <span>{course.schedule}</span>
                  </div>
                  <div class="detail-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                      <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                    <span>{course.location}</span>
                  </div>
                  <div class="detail-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                      <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                    </svg>
                    <span>{course.credits} credits</span>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </section>

        <!-- Academic History -->
        <section class="sidebar-section">
          <h3>Academic History</h3>
          <div class="history-list">
            {academicHistory.map(semester => (
              <div class={`history-item ${semester.status.toLowerCase()}`}>
                <div class="semester-header">
                  <span class="semester-name">{semester.semester}</span>
                  <span class={`semester-status ${semester.status.toLowerCase()}`}>
                    {semester.status}
                  </span>
                </div>
                <div class="semester-stats">
                  <div class="semester-stat">
                    <span class="stat-label">Credits:</span>
                    <span class="stat-value">{semester.credits}</span>
                  </div>
                  <div class="semester-stat">
                    <span class="stat-label">GPA:</span>
                    <span class="stat-value">{semester.gpa}</span>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </section>
      </div>
    </div>
  </div>
</StudentLayout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Edit button functionality
    const editButtons = document.querySelectorAll('.edit-btn');
    
    editButtons.forEach(button => {
      button.addEventListener('click', () => {
        const section = (button as HTMLElement).dataset.section;
        // Here you would typically open a modal or navigate to an edit form
        console.log(`Editing ${section} section`);
        alert(`Edit ${section} functionality would be implemented here`);
      });
    });

    // Avatar upload functionality
    const avatarUpload = document.querySelector('.avatar-upload');
    if (avatarUpload) {
      avatarUpload.addEventListener('click', () => {
        // Here you would typically open a file picker
        console.log('Avatar upload clicked');
        alert('Avatar upload functionality would be implemented here');
      });
    }
  });
</script>

<style>
  :root {
    --bg: #1c1c1c;
    --panel: #242424;
    --muted: var(--color-text-muted);
    --accent1: rgb(139, 0, 0);
    --accent2: rgba(139, 0, 0, 0.8);
    --card-bg: rgba(139, 0, 0, 0.1);
    --card-border: rgba(139, 0, 0, 0.2);
    --success: #10b981;
    --warning: #f59e0b;
    --danger: #ef4444;
    --info: #3b82f6;
  }

  .student-profile {
    padding: 0;
    font-family: 'IBM Plex Sans', system-ui, sans-serif;
    width: 100%;
    color: #E6EEF8;
  }

  .profile-header {
    margin-bottom: 2rem;
  }

  .header-content h1 {
    font-size: 2rem;
    font-weight: 600;
    background: linear-gradient(45deg, var(--accent1), #EF4444);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin: 0;
  }

  .header-description {
    color: var(--muted);
    margin: 0.25rem 0 0 0;
  }

  .profile-content {
    display: grid;
    grid-template-columns: 1fr 350px;
    gap: 2rem;
  }

  .profile-section {
    margin-bottom: 2rem;
  }

  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }

  .section-header h2 {
    margin: 0;
    color: white;
    font-size: 1.3rem;
    font-weight: 600;
  }

  .edit-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    color: var(--muted);
    cursor: pointer;
    font-size: 0.85rem;
    transition: all 0.15s;
  }

  .edit-btn:hover {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    border-color: rgba(255, 255, 255, 0.3);
  }

  .profile-card {
    background: var(--panel);
    border-radius: 12px;
    padding: 1.5rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .student-info {
    display: flex;
    gap: 2rem;
    align-items: flex-start;
  }

  .avatar-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
  }

  .avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    overflow: hidden;
    border: 3px solid var(--accent1);
    background: rgba(255, 255, 255, 0.1);
  }

  .avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .avatar-upload {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: var(--accent1);
    border: none;
    border-radius: 6px;
    color: white;
    cursor: pointer;
    font-size: 0.8rem;
    font-weight: 500;
    transition: all 0.15s;
  }

  .avatar-upload:hover {
    background: var(--accent2);
  }

  .basic-info {
    flex: 1;
  }

  .info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }

  .info-item {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .info-item label {
    font-size: 0.85rem;
    color: var(--muted);
    font-weight: 500;
  }

  .info-item span {
    color: white;
    font-size: 0.95rem;
  }

  .status {
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 500;
    text-transform: uppercase;
    width: fit-content;
  }

  .status.active {
    background: rgba(16, 185, 129, 0.2);
    color: #34d399;
  }

  .academic-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 1.5rem;
    margin-bottom: 1.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .stat-item {
    text-align: center;
    background: rgba(255, 255, 255, 0.02);
    padding: 1rem;
    border-radius: 8px;
  }

  .stat-value {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--accent1);
    margin-bottom: 0.25rem;
  }

  .stat-label {
    font-size: 0.8rem;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .academic-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }

  /* Sidebar Styles */
  .profile-sidebar {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .sidebar-section {
    background: var(--panel);
    border-radius: 12px;
    padding: 1.5rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .sidebar-section h3 {
    margin: 0 0 1rem 0;
    color: white;
    font-size: 1.1rem;
    font-weight: 600;
  }

  .courses-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .course-item {
    background: rgba(255, 255, 255, 0.03);
    border-radius: 8px;
    padding: 1rem;
    border: 1px solid rgba(255, 255, 255, 0.05);
  }

  .course-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
  }

  .course-code {
    font-size: 0.8rem;
    color: var(--muted);
    font-weight: 500;
    background: rgba(255, 255, 255, 0.1);
    padding: 0.2rem 0.6rem;
    border-radius: 12px;
  }

  .course-grade {
    padding: 0.2rem 0.6rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
  }

  .course-grade.grade-a {
    background: rgba(16, 185, 129, 0.2);
    color: #34d399;
  }

  .course-grade.grade-b {
    background: rgba(59, 130, 246, 0.2);
    color: #60a5fa;
  }

  .course-name {
    margin: 0 0 0.75rem 0;
    color: white;
    font-size: 0.95rem;
    font-weight: 500;
  }

  .course-details {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
  }

  .detail-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--muted);
    font-size: 0.8rem;
  }

  .detail-item svg {
    color: var(--accent1);
  }

  .history-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .history-item {
    background: rgba(255, 255, 255, 0.03);
    border-radius: 8px;
    padding: 1rem;
    border: 1px solid rgba(255, 255, 255, 0.05);
  }

  .history-item.current {
    border-left: 3px solid var(--accent1);
    background: rgba(139, 0, 0, 0.05);
  }

  .semester-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
  }

  .semester-name {
    font-weight: 500;
    color: white;
    font-size: 0.9rem;
  }

  .semester-status {
    padding: 0.2rem 0.6rem;
    border-radius: 12px;
    font-size: 0.7rem;
    font-weight: 500;
    text-transform: uppercase;
  }

  .semester-status.current {
    background: rgba(139, 0, 0, 0.2);
    color: var(--accent1);
  }

  .semester-status.completed {
    background: rgba(16, 185, 129, 0.2);
    color: #34d399;
  }

  .semester-stats {
    display: flex;
    gap: 1rem;
  }

  .semester-stat {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.8rem;
  }

  .semester-stat .stat-label {
    color: var(--muted);
  }

  .semester-stat .stat-value {
    color: white;
    font-weight: 500;
  }

  @media (max-width: 1024px) {
    .profile-content {
      grid-template-columns: 1fr;
    }

    .profile-sidebar {
      grid-row: 1;
    }
  }

  @media (max-width: 768px) {
    .student-info {
      flex-direction: column;
      align-items: flex-start;
      gap: 1.5rem;
    }

    .avatar-section {
      align-self: center;
    }

    .info-grid {
      grid-template-columns: 1fr;
    }

    .academic-stats {
      grid-template-columns: repeat(2, 1fr);
    }

    .academic-details {
      grid-template-columns: 1fr;
    }

    .section-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 1rem;
    }

    .semester-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.5rem;
    }

    .semester-stats {
      flex-direction: column;
      gap: 0.25rem;
    }
  }
</style>